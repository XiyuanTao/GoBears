To do：

- [x] 评论页数据采集测试
- [x] 说明及注释
- [ ] 数值化
- [ ] 自动化
- [ ] 分表
- [ ] 数据库搭建
- [ ] 网页快照



## 一. 确定原始urls
**Beauty & Personal Care / Health & Household (Group A)**

- Shampoo
- Body wash
- Lipsticks

**Home & Kitchen / Tools & Home Improvement / Kitchen & Dining (Group B)**

- Car camera
- Security camera

### 方式1
**Corresponding URLs (by search results) **

- https://www.amazon.com/s?k=shampoo&crid=3HRLZHDGH8FVG&sprefix=shampo%2Caps%2C669&ref=nb_sb_noss_2
- https://www.amazon.com/s?k=Body+wash&crid=A4U5UM80BRMO&sprefix=body+wash%2Caps%2C396&ref=nb_sb_noss
- https://www.amazon.com/s?k=Lipsticks&crid=156DT8FY808PV&sprefix=lipsticks%2Caps%2C400&ref=nb_sb_noss
- https://www.amazon.com/s?k=Car+camera&crid=1M80O16SRJBK0&sprefix=lipsticks%2Caps%2C363&ref=nb_sb_noss
- https://www.amazon.com/s?k=Security+camera&crid=22KBIIU7EP084&sprefix=car+camera%2Caps%2C401&ref=nb_sb_noss

### 方式2
**Corresponding URLs (by categories sorted by Amazon)** 

- https://www.amazon.com/b?node=11057651
- https://www.amazon.com/b?node=11056281
- https://www.amazon.com/b?node=11059111
- https://www.amazon.com/b?node=10980521
- https://www.amazon.com/b?node=898400
  

- https://www.amazon.com/s?k=Hair+Shampoo&i=beauty&rh=n%3A11057651&_encoding=UTF8&c=ts&qid=1642254517&ts_id=11057651&ref=sr_pg_1
- (https://www.amazon.com/s?k=Body+Cleansers&i=beauty&rh=n%3A11056281&_encoding=UTF8&c=ts&qid=1642254548&ts_id=11056281&ref=sr_pg_1
- https://www.amazon.com/s?k=Lipstick&i=beauty&rh=n%3A11059111&_encoding=UTF8&c=ts&qid=1642254571&ts_id=11059111&ref=sr_pg_1
- https://www.amazon.com/s?k=Car+Video&i=car-electronics&rh=n%3A10980521&_encoding=UTF8&c=ts&qid=1642254612&ts_id=10980521&ref=sr_pg_1
- https://www.amazon.com/s?k=Surveillance+%26+Security+Cameras&i=photo&rh=n%3A898400&_encoding=UTF8&c=ts&qid=1642254637&ts_id=898400&ref=sr_pg_1
to see the details, go [https://docs.google.com/spreadsheets/d/1aoSy4_zLt8Vc3TR0U84W-je9JJqLyFtfu62cKf9Svp8/edit?usp=sharing](url)


## 二. 获得商品列表信息(Group A)
**包含可统一抓取的Shampoo, Body Wash, Lipstick 的商品列表信息**
八爪鱼匹配规则配置文件[https://drive.google.com/file/d/1eQT4EdNhQ5L1GpztKx-Sbl1Fy4xC7cgs/view?usp=sharing](url)
八爪鱼爬取规则文件[https://drive.google.com/file/d/1eQT4EdNhQ5L1GpztKx-Sbl1Fy4xC7cgs/view?usp=sharing](url)

### 列表信息字段及对应Xpath
**TITLE：**
/descendant-or-self::SPAN[contains(@class,"a-size-base-plus a-color-base a-text-normal")]

**URL：**
/descendant-or-self::A[contains(@class,"a-link-normal s-no-outline")]

**ASIN：** **10位，商品唯一识别码**
(?<=(dp/|dp%2F))(.+?){10}
_复制URL结果+正则匹配_

**AVG_RATING：**
/descendant-or-self::SPAN[contains(@class,"a-icon-alt")]

**NUMBER_of_RATINGS：**
_/descendant-or-self::SPAN[contains(@class,"a-size-base")]_
/descendant-or-self::div[@class="a-row a-size-small"]/span[2][@aria-label]

**SPONSORED：**
/descendant-or-self::a[@class = "s-label-popover s-sponsored-label-text"]//span[@class="a-color-base"]

**PRICE：**
/descendant-or-self::SPAN[contains(@class,"a-offscreen")]

**PRICE_of_SPECIFICATION：**
/descendant-or-self::SPAN[contains(@class,"a-size-base a-color-secondary")]

**SUBSCRIBE：**
/descendant-or-self::div[@class="a-section a-spacing-none a-spacing-top-small s-price-instructions-style"]/DIV[contains(@class,"a-row a-size-base a-color-secondary")]//SPAN[1]

**PRIME：**
/descendant-or-self::DIV[contains(@class,"a-row s-align-children-center")]/SPAN[2]/SPAN[1]

**SPECIFICATION：**
/descendant-or-self::SPAN[contains(@class,"a-text-bold")]

**DELIVERY_TIME：**
_/descendant-or-self::SPAN[@class="a-text-bold"]_
/descendant-or-self::DIV[contains(@class,"a-row s-align-children-center")]/SPAN[2]/SPAN[2]

**SHIPPING：**
/descendant-or-self::DIV[contains(@class,"a-row a-size-base a-color-secondary s-align-children-center")]/DIV[2]/SPAN[1]/SPAN[1]

**ORIGINAL_PRICE：**
/descendant-or-self::span[@class="a-price a-text-price"]/SPAN[contains(@class,"a-offscreen")]

**SPECIAL：**
/descendant-or-self::SPAN[@class="a-badge-label-inner a-text-ellipsis"]

**FEATURED:**
/descendant-or-self::SPAN[@class="a-size-micro a-color-secondary”]

### 翻页：
_//UL[contains(@class,"a-pagination")]/li[contains(@class,"a-selected")]/following-sibling::li[1]/A[1]_
_//li[@class="a-last"]/a[1]_
//a[text() = "Next"]

## 二.(2) 获得商品列表信息(Car Videos)
八爪鱼匹配规则配置文件[https://drive.google.com/file/d/1GZIRqr0oUPU4myeyGRCEMopEsMcT8KrH/view?usp=sharing](url)
八爪鱼爬取规则文件[https://drive.google.com/file/d/1KwvaOy7jP8xxkOQA8Gh5z3Qevur6xrHu/view?usp=sharing](url)

## 二.(3)获得商品列表信息(Surveillance & Security Cameras)
八爪鱼匹配规则配置文件[https://drive.google.com/file/d/1GZIRqr0oUPU4myeyGRCEMopEsMcT8KrH/view?usp=sharing](url)
八爪鱼爬取规则文件[https://drive.google.com/file/d/16jhxgi_HggZGgJ4GRkJ37J3ZOCJQO8-L/view?usp=sharing](url)

## 三. 商品列表信息结果示例

- **Group A**[https://docs.google.com/spreadsheets/d/1lXxoC3kMhj7J6C8BMUYcat5HGgMs3JOC/edit?usp=sharing&ouid=108011545049023239415&rtpof=true&sd=true](url)
- Shampoo [https://docs.google.com/spreadsheets/d/1lBLdkfNXAyJin-jFclp_M3nYf1vSoPAE/edit?usp=sharing&ouid=108011545049023239415&rtpof=true&sd=true](url)
- Body Wash [https://docs.google.com/spreadsheets/d/1mJ3q6xyg_AdpAUGNxN5LcHQECQbdIGTQ/edit?usp=sharing&ouid=108011545049023239415&rtpof=true&sd=true](url)
- Lipstick [https://docs.google.com/spreadsheets/d/1_JIShwOL3a_8NtFM7ZKkltzSgJcVppMc/edit?usp=sharing&ouid=108011545049023239415&rtpof=true&sd=true](url)
- **Car Video** [https://docs.google.com/spreadsheets/d/1di5Lmk08w-yTlEuAIaPJ_NNx-A0Ovl6B/edit?usp=sharing&ouid=108011545049023239415&rtpof=true&sd=true](url)
- **Surveillance & Security Cameras** [https://docs.google.com/spreadsheets/d/1vMXEnXl-Tza3lqs9ZhvQ_wfro4f5tL5I/edit?usp=sharing&ouid=108011545049023239415&rtpof=true&sd=true](url)

## 四. 评论页数据采集测试
匹配配置
[https://drive.google.com/file/d/14GmvayvZO4Fq5pLnaK7fTxfE20MAT2GQ/view?usp=sharing](url)
爬取配置
[https://drive.google.com/file/d/1FgbUJ_5vSvJsPlwqA60AvVpblMekvWG7/view?usp=sharing](url)

### 评价分布
5星//table[@class="a-normal a-align-center a-spacing-base"]/tbody[1]/tr[1]/td[3]/span[2]/a[1]
4星//table[@class="a-normal a-align-center a-spacing-base"]/tbody[1]/tr[2]/td[3]/span[2]/a[1]
3星//table[@class="a-normal a-align-center a-spacing-base"]/tbody[1]/tr[3]/td[3]/span[2]/a[1]
2星//table[@class="a-normal a-align-center a-spacing-base"]/tbody[1]/tr[4]/td[3]/span[2]/a[1]
1星//table[@class="a-normal a-align-center a-spacing-base"]/tbody[1]/tr[5]/td[3]/span[2]/a[1]


### 点击See more
//span[text() = “See more”]


### By Feature
循环列表：//div[@id="cr-summarization-attributes-list"]//div[@class="a-section a-spacing-none"]
FEATURES：/descendant-or-self::div/div/div[1]/div/span
AVG_STARS：/descendant-or-self::/div/div/div[2]/span[2]


### Key Words
循环列表：//div[@class="cr-lighthouse-terms"]//span[@class="a-declarative"]
KEY_WORDS：/a/span

### Reviews
循环列表：//div[@id='cm-cr-dp-review-list']
TITLE_REV:/descendant-or-self::a[@data-hook="review-title”]/span
STAR_REV:/descendant-or-self::span[@class="a-icon-alt"]
TIME_and_LOCATION_REV:/descendant-or-self::span[@data-hook="review-date"]
OWNER_REV:/descendant-or-self::span[@class="a-profile-name"]
TITLE_OF_OWNER_REV:/descendant-or-self::div[@class="badges-genome-widget"]
VERIFIED_REV:/descendant-or-self::span[@data-hook="avp-badge-linkless"]
VINE_REV:/descendant-or-self::span[@data-hook="linkless-vine-review-badge"]
MAIN_REV:/descendant-or-self::span[@class="a-size-base review-text"]/div/div/span
HELPFUL_REV:/descendant-or-self::span[@data-hook="helpful-vote-statement"]



## 五. 数值化：
AVG_RATING: 
正则匹配：取前3个字符： ^.{0,3}

No_RATINGS:
替换，

PRICE:
替换$

ORIGINAL_PRICE：
正则替换$